#!/usr/bin/env node
"use strict";var e=require("commander"),c="fqy-cli";const s=require("chalk"),o=require("inquirer"),{exec:t}=require("child_process"),r=require("../src/config/url"),a=require("fs");function n(e){a.existsSync(e.projectName)&&(console.log(s.red(`file ${e.projectName} already exist！！！`)),process.exit()),console.log(r),t(`git clone ${r[e.type]} ${e.projectName}`,((c,o,t)=>{c&&(console.log(c),process.exit()),console.log(s.green("Create Project Success!!!")),console.log(s.green(`cd ${e.projectName}`)),console.log(s.green("npm install")),process.exit()}))}let i={create:{alias:"c",params:"[project-name]",description:"create a new project",action:e=>{let c=n;e?c(e):o.prompt([{type:"input",message:"项目名称:",name:"projectName",validate:e=>e&&e.trim()?!e.includes(" ")||s.red("项目名不能包含空格，请重新输入"):s.red("项目名不能为空，请重新输入")},{type:"list",message:"请选择你需要创建的模版",name:"lang",choices:["React","Vue"]},{type:"list",when:e=>"Vue"===e.lang,message:"请选择你需要创建的项目类型",name:"type",choices:["Vue-ssr","Vue-h5"]},{type:"list",when:e=>"React"===e.lang,message:"请选择你需要创建的项目类型",name:"type",choices:["pc","mini","h5"]}]).then((e=>{c(e)}))}}};const l=new e.Command(c);Reflect.ownKeys(i).map((e=>{const{params:c,alias:s,action:o,description:t}=i[e]||{};l.command(`${e} ${c||""}`).alias(s).description(t).action(((...e)=>{"function"==typeof o&&o(...e)}))})),l.parse(process.argv);

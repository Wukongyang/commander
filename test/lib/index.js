#!/usr/bin/env node
"use strict";const e=require("chalk"),t=require("inquirer"),{exec:c}=require("child_process"),o=require("fs");function n(t){var n;o.existsSync(t.projectName)&&(console.log(e.red(`file ${t.projectName} already exist！！！`)),process.exit()),c(`git clone ${n=t.type,{mini:"https://gitee.com/wukongyang/mini-template.git",pc:"https://gitee.com/wukongyang/pc-template.git",h5:"https://gitee.com/wukongyang/h5-template.git"}[n]} ${t.projectName}`,((c,o,n)=>{c&&(console.log(c),process.exit()),console.log(e.green("Create Project Success!!!")),console.log(e.green(`cd ${t.projectName}`)),console.log(e.green("npm install")),process.exit()}))}const s={params:"[project-name]",description:"create a new project",action:c=>{let o=n;c?o(c):t.prompt([{type:"input",message:"项目名称:",name:"projectName",validate:t=>t&&t.trim()?!t.includes(" ")||e.red("项目名不能包含空格，请重新输入"):e.red("项目名不能为空，请重新输入")},{type:"list",message:"请选择你需要创建的模版",name:"lang",choices:["React","Vue"]},{type:"list",when:e=>"Vue"===e.lang,message:"请选择你需要创建的项目类型",name:"type",choices:["Vue-ssr","Vue-h5"]},{type:"list",when:e=>"React"===e.lang,message:"请选择你需要创建的项目类型",name:"type",choices:["pc","mini","h5"]}]).then((e=>{o(e)}))}},a=require("chalk");let i={create:s,version:{params:"[package-version]",description:"package version",action:()=>{console.log(a.green("1.0.1"))}}};const{Command:r}=require("commander"),p=new r;Reflect.ownKeys(i).map((e=>{const{params:t,action:c,description:o}=i[e]||{};p.command(`${e} ${t||""}`).description(o).action((e=>{"function"==typeof c&&c(e)}))})),p.parse(process.argv);
